function APP(){var d=0,l=new Date(Date.now()).getTime(),n=(document.location.href,document.documentElement.innerHTML);function p(e){return(new DOMParser).parseFromString(e,"text/html")}function f(){(new APP).Build()}function h(){if(history.state&&history.state.view){var e=p(document.documentElement.innerHTML);for(var t in history.state.view)if(!e.querySelector(t))return history.state.snap=!0,void history.replaceState(history.state,"page "+d,document.location.href)}}function r(){try{var e=this.href,t=this.getAttribute("app-view");"undefined"==t&&(t="body");var n=this.getAttribute("app-history");n=null==n||"false"!=n;var r=this.getAttribute("app-content"),o=this.getAttribute("app-head");i=e,a=t,u=n,c=r,s=o=null!=o&&"true"==o,AJAX.GET(i,{dt:l},function(e,t){var n;if(t)if(s&&(n=p(t).querySelector("head").innerHTML)&&0<n.length&&(document.querySelector("head").innerHTML=n),c){var r=p(t).querySelector(c).innerHTML;document.querySelector(a).innerHTML=r,"body"==a&&f(),h(),u&&((o={})[a]=r,n&&(o.head=n),history.pushState({snap:!1,view:o},"page "+d++,i))}else{var o;document.querySelector(a).innerHTML=t,"body"==a&&f(),h(),u&&((o={})[a]=t,n&&(o.head=n),history.pushState({snap:!1,view:o},"page "+d++,i))}})}catch(e){}var i,a,u,c,s;return!1}this.Build=function(){for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].getAttribute("app")&&(e[t].onclick=r)},window.onpopstate=function(e){if(null==e.state)document.location.reload();else if(e.state.snap&&(document.documentElement.innerHTML=n,f()),e.state.view)for(var t in e.state.view)document.querySelector(t).innerHTML=e.state.view[t]}}(new APP).Build();var AJAX={x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},Send:function(e,t,n,r,o){void 0===o&&(o=!0);var i=AJAX.x();i.open(n,e,o),i.addEventListener("error",function(){t({code:"500",message:"Server error"},null)},!1),i.addEventListener("abort",function(){t({code:"500",message:"Network error"},null)},!1),i.onreadystatechange=function(){4==i.readyState&&(200===i.status?t(null,i.responseText):t({code:"404",message:"Not found"},null))},"POST"==n&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r)},GET:function(e,t,n,r){var o=[];for(var i in t)o.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));AJAX.Send(e+(o.length?"?"+o.join("&"):""),n,"GET",null,r)},POST:function(e,t,n,r){AJAX.Send(e,n,"POST",t,r)},PUT:function(e,t,n,r){AJAX.Send(e,n,"PUT",t,r)},DELETE:function(e,t,n,r){var o=[];for(var i in t)o.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));AJAX.Send(e+(o.length?"?"+o.join("&"):""),n,"DELETE",null,r)}};window.AJAX=AJAX;